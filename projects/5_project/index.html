<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Second Price Auction Simulator | Kenneth Hahn's Data Science Portfolio </title> <meta name="author" content="Kenneth E. Hahn"> <meta name="description" content="Object Oriented Programming with Python"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://hahnkenneth.github.io/projects/5_project/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Kenneth Hahn's Data Science Portfolio </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/resume/">resume </a> </li> <li class="nav-item "> <a class="nav-link" href="/hobbies/">hobbies </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Second Price Auction Simulator</h1> <p class="post-description">Object Oriented Programming with Python</p> </header> <article> <p>This project was an implementation of creating a <code class="language-plaintext highlighter-rouge">Bidder</code> class that attempts to create the best bidder class in a <a href="https://smartclip.tv/adtech-glossary/second-price-auction/" rel="external nofollow noopener" target="_blank">second-price auction</a> to show website users an advertisement. The idea of this was to utilize the multi-armed bandit problem in order to create a <code class="language-plaintext highlighter-rouge">Bidder</code> that balances exploration and exploitation in order to get the user’s attention as much as possible.</p> <p>We will walk through the implementation by first going over the <code class="language-plaintext highlighter-rouge">Auction</code> class. The <code class="language-plaintext highlighter-rouge">Auction</code> will take inputs of <code class="language-plaintext highlighter-rouge">users</code> and <code class="language-plaintext highlighter-rouge">bidders</code>, which are lists that consists of different <code class="language-plaintext highlighter-rouge">User</code> and <code class="language-plaintext highlighter-rouge">Bidder</code> class objects, respectively. It will then initialize the variables and also keep track of the balances of each of the <code class="language-plaintext highlighter-rouge">bidders</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Auction</span><span class="p">:</span>
    <span class="sh">'''</span><span class="s">Class to represent an online second-price ad auction</span><span class="sh">'''</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">users</span><span class="p">,</span> <span class="n">bidders</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Initializing users, bidders, and dictionary to store balances 
        for each bidder in the auction</span><span class="sh">'''</span>
        <span class="n">self</span><span class="p">.</span><span class="n">users</span> <span class="o">=</span> <span class="n">users</span>
        <span class="n">self</span><span class="p">.</span><span class="n">bidders</span> <span class="o">=</span> <span class="n">bidders</span><span class="p">.</span><span class="nf">copy</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balances</span> <span class="o">=</span> <span class="p">{</span><span class="n">bidder</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">bidder</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">bidders</span><span class="p">}</span>
</code></pre></div></div> <p>The below code is how the <code class="language-plaintext highlighter-rouge">Auction</code> executes a round. It begins by choosing a random user to show all the <code class="language-plaintext highlighter-rouge">bidders</code>. Based on the random <code class="language-plaintext highlighter-rouge">user_id</code>, they will output a certain valued <code class="language-plaintext highlighter-rouge">bid</code>. The auction will then choose the <code class="language-plaintext highlighter-rouge">Bidder</code> as the one who bid the most money and will then determine what the next highest price was, which we will call <code class="language-plaintext highlighter-rouge">winning_price</code>. The <code class="language-plaintext highlighter-rouge">winning_price</code> will be the amount of money that the winning bidder will have to pay in order to show the user their ad. The <code class="language-plaintext highlighter-rouge">Auction</code> will then show a user an advertisement to which the user will output a boolean for whether they <code class="language-plaintext highlighter-rouge">clicked</code> on the ad or not. Finally, the auction will find the winning <code class="language-plaintext highlighter-rouge">bidder</code>, add one dollar to their balance if the user <code class="language-plaintext highlighter-rouge">clicked</code> on the ad, and subtract the <code class="language-plaintext highlighter-rouge">winning_price</code> for the round. Even if a particular <code class="language-plaintext highlighter-rouge">Bidder</code> did not win, it will still be notified that it did not win and will inform them what the <code class="language-plaintext highlighter-rouge">winning_price</code> was.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">def</span> <span class="nf">execute_round</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Executes a single round of an auction, completing the following steps:
            - random user selection
            - bids from every qualified bidder in the auction
            - selection of winning bidder based on maximum bid
            - selection of actual price (second-highest bid)
            - showing ad to user and finding out whether or not they click
            - notifying winning bidder of price and user outcome and updating balance
            - notifying losing bidders of price</span><span class="sh">'''</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">users</span><span class="p">))</span> <span class="c1"># choose a random user_id for the Auction
</span>        <span class="n">winning_indices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">bidder</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">bidders</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">balances</span><span class="p">[</span><span class="n">bidder</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1000</span><span class="p">:</span> <span class="c1"># remove bidders that have less than -1000 dollars
</span>                <span class="k">del</span> <span class="n">self</span><span class="p">.</span><span class="n">balances</span><span class="p">[</span><span class="n">bidder</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">self</span><span class="p">.</span><span class="n">bidders</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">balances</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#end Auction if there are no more bidders remaining
</span>            <span class="k">return</span> <span class="sh">'</span><span class="s">All Bidders are disqualified</span><span class="sh">'</span> 
        
        <span class="c1"># show all the bidders the user_id and request for them to bid
</span>        <span class="n">bids</span> <span class="o">=</span> <span class="p">[</span><span class="n">bidder</span><span class="p">.</span><span class="nf">bid</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">bidder</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">bidders</span><span class="p">)]</span>
        <span class="n">max_price</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">bids</span><span class="p">)</span> <span class="c1"># find the highest bid
</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">bid</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">bids</span><span class="p">):</span> <span class="c1"># find the bidder with the highest bid
</span>            <span class="k">if</span> <span class="n">bid</span> <span class="o">==</span> <span class="n">max_price</span><span class="p">:</span>
                <span class="n">winning_indices</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">winning_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># if there is more than one bidder that had the highest bid, then randomly choose one of the indices
</span>            <span class="n">winning_index</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">choice</span><span class="p">(</span><span class="n">winning_indices</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">winning_index</span> <span class="o">=</span> <span class="n">winning_indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">bids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># find the second highest bid, which is the price that the winning bidder is going to have to pay
</span>            <span class="n">remaining_values</span> <span class="o">=</span> <span class="n">bids</span><span class="p">[:</span><span class="n">winning_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">bids</span><span class="p">[</span><span class="n">winning_index</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">winning_price</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">remaining_values</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">winning_price</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">bids</span><span class="p">)</span>

        <span class="n">clicked</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">users</span><span class="p">[</span><span class="n">user_id</span><span class="p">].</span><span class="nf">show_ad</span><span class="p">()</span> <span class="c1"># show the user the ad and determine whether they clicked on the ad or not
</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">bidder</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">bidders</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="n">winning_index</span><span class="p">:</span> <span class="c1"># if the bidder won the round, then notify the bidder and update their balance
</span>                <span class="n">bidder</span><span class="p">.</span><span class="nf">notify</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span><span class="n">winning_price</span><span class="p">,</span><span class="n">clicked</span><span class="p">)</span>
                <span class="n">self</span><span class="p">.</span><span class="n">balances</span><span class="p">[</span><span class="n">bidder</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">balances</span><span class="p">[</span><span class="n">bidder</span><span class="p">]</span> \
                                        <span class="o">+</span> <span class="nf">int</span><span class="p">(</span><span class="n">clicked</span><span class="p">)</span> <span class="o">-</span> <span class="n">winning_price</span> <span class="c1"># if the user clicked the ad then +1 dollar but remove the price of the second highest bid
</span>            <span class="k">else</span><span class="p">:</span>
                <span class="n">bidder</span><span class="p">.</span><span class="nf">notify</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span><span class="n">winning_price</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span> <span class="c1"># if the bidder did not win, then just notify the bidder of the winning price
</span></code></pre></div></div> <p>We now move onto the <code class="language-plaintext highlighter-rouge">User</code> class, now knowing how the <code class="language-plaintext highlighter-rouge">Auction</code> class works. Fortunately, the <code class="language-plaintext highlighter-rouge">User</code> class is much simpler to understand. Each <code class="language-plaintext highlighter-rouge">User</code> class that is created will be assigned a random probability variable that is just a value pulled from a uniform distribution from [0,1]. When the <code class="language-plaintext highlighter-rouge">User</code> is shown an ad in the <code class="language-plaintext highlighter-rouge">show_ad()</code> function, they will choose a boolean value that represents whether they will click on the ad or not, based on their <code class="language-plaintext highlighter-rouge">__probability</code> variable.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">User</span><span class="p">:</span>
    <span class="sh">'''</span><span class="s">Class to represent a user with a secret probability of clicking an ad.</span><span class="sh">'''</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Generating a probability between 0 and 1 from a uniform distribution</span><span class="sh">'''</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__probability</span> <span class="o">=</span>  <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">uniform</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">User object with secret probability</span><span class="sh">'''</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">'</span><span class="s">This user has a probability </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">__probability</span><span class="si">}</span><span class="s"> of clicking on an ad</span><span class="sh">'</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">User object with a secret likelihood of clicking on an ad</span><span class="sh">'''</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">'</span><span class="s">This user has a probability </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">__probability</span><span class="si">}</span><span class="s"> of clicking on an ad</span><span class="sh">'</span>
    <span class="k">def</span> <span class="nf">show_ad</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Returns True to represent the user clicking on an ad or False otherwise</span><span class="sh">'''</span>
        <span class="k">return</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">choice</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span><span class="bp">False</span><span class="p">],</span><span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">__probability</span> <span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">__probability</span><span class="p">])</span>

</code></pre></div></div> <p>The bidders is where we will modify the strategy based on which <code class="language-plaintext highlighter-rouge">User</code> they’re bidding on and how much they should bid. The simplest <code class="language-plaintext highlighter-rouge">Bidder</code> class is the <code class="language-plaintext highlighter-rouge">RandomBidder</code>, shown in the code below. We first initialize it with the number of users, and number of rounds that are in the <code class="language-plaintext highlighter-rouge">Auction</code>. The <code class="language-plaintext highlighter-rouge">bid()</code> method for the <code class="language-plaintext highlighter-rouge">RandomBidder</code> just returns a random float value from a uniform distribution from [0,1]. When it is notified through the <code class="language-plaintext highlighter-rouge">notify()</code> method, it will then update it’s internal balance. If it won the bid, we will always subtract what the <code class="language-plaintext highlighter-rouge">price</code> was from the round. If it won the bid and the <code class="language-plaintext highlighter-rouge">User</code> clicked on it’s ad, then we will increase the balance by one dollar. For all the <code class="language-plaintext highlighter-rouge">Bidder</code> classes that we create, we will also incorborate a <code class="language-plaintext highlighter-rouge">self.balances_over_time</code>, which is a list that keeps track of how the balances of each object changes with the number of rounds.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">RandomBidder</span><span class="p">:</span>
    <span class="sh">'''</span><span class="s">Class to represent a Random bidder in an online second-price ad auction</span><span class="sh">'''</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">num_users</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_rounds</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Setting initial balance to 0, number of users, number of rounds, and round counter</span><span class="sh">'''</span>
        <span class="n">self</span><span class="p">.</span><span class="n">num_users</span> <span class="o">=</span> <span class="n">num_users</span>
        <span class="n">self</span><span class="p">.</span><span class="n">num_rounds</span> <span class="o">=</span> <span class="n">num_rounds</span>
        <span class="n">self</span><span class="p">.</span><span class="n">clicked</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">self</span><span class="p">.</span><span class="n">winning_price</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balances_over_time</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">bid</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Returns a non-negative bid amount</span><span class="sh">'''</span>
        <span class="n">bids</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># output a random bid amount
</span>        <span class="k">return</span> <span class="n">bids</span>

    <span class="k">def</span> <span class="nf">notify</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">auction_winner</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">clicked</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Updates bidder attributes based on results from an auction round</span><span class="sh">'''</span>
        <span class="k">if</span> <span class="n">auction_winner</span><span class="p">:</span> <span class="c1"># if it won the auction, subtract the second highest price from its balance
</span>            <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">-=</span> <span class="nf">round</span><span class="p">(</span><span class="n">price</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">clicked</span><span class="p">:</span> <span class="c1"># if the user clicked on the ad, then add one dolalr to balance
</span>                <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">self</span><span class="p">.</span><span class="n">balances_over_time</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">balance</span><span class="p">)</span> <span class="c1"># append the new balance
</span>            
        <span class="k">else</span><span class="p">:</span> <span class="c1"># if it did not win the Auction round, just update the current balance for the round
</span>            <span class="n">self</span><span class="p">.</span><span class="n">winning_price</span> <span class="o">=</span> <span class="n">price</span>
            <span class="n">self</span><span class="p">.</span><span class="n">balances_over_time</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">balance</span><span class="p">)</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">EpsilonGreedyBidder</code> is the next iteration from the <code class="language-plaintext highlighter-rouge">RandomBidder</code> class, shown in the code below. The main difference with this class is that we now keep track of whether this bidder won the auction round and with which user. In this case, we can then create an estimate for each users probability. We will initialize an <code class="language-plaintext highlighter-rouge">epsilon</code> value, which is a float value from 0 to 1. In the <code class="language-plaintext highlighter-rouge">bid()</code> method, the <code class="language-plaintext highlighter-rouge">Bidder</code> will choose a random float value from 0 to 1, if it’s higher than the <code class="language-plaintext highlighter-rouge">epsilon</code> threshold, the <code class="language-plaintext highlighter-rouge">Bidder</code> will then look at the current <code class="language-plaintext highlighter-rouge">user_prob</code>, which is the estimated probability that the user will click based on past rounds. If the <code class="language-plaintext highlighter-rouge">user_prob</code> is the highest probability, then then <code class="language-plaintext highlighter-rouge">Bidder</code> will bet 0.99 dollars, or the maximum amount without actually losing money as the most amount of money that a <code class="language-plaintext highlighter-rouge">Bidder</code> will gain is $1 only if the <code class="language-plaintext highlighter-rouge">User</code> clicks on the add. Finally, after a round ends, the <code class="language-plaintext highlighter-rouge">notify()</code> function will determine whether the <code class="language-plaintext highlighter-rouge">Bidder</code> won or not. If the <code class="language-plaintext highlighter-rouge">Bidder</code> won, then the user probability will be updated for that specific user based on whether they clicked or not.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">EpsilonGreedyBidder</span><span class="p">:</span>
    <span class="sh">'''</span><span class="s">Class to represent an Epsilon Greedy bidder in an online second-price ad auction</span><span class="sh">'''</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">num_users</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_rounds</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Setting initial balance to 0, number of users, number of rounds, and round counter</span><span class="sh">'''</span>
        <span class="n">self</span><span class="p">.</span><span class="n">num_rounds</span> <span class="o">=</span> <span class="n">num_rounds</span>
        <span class="n">self</span><span class="p">.</span><span class="n">num_users</span> <span class="o">=</span> <span class="n">num_users</span>
        <span class="n">self</span><span class="p">.</span><span class="n">winning_prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_rounds</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">user_clicked</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_users</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">user_won_auction</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_users</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">user_prob</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_users</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">epsilon</span> <span class="o">=</span> <span class="n">epsilon</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balances_over_time</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">bid</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Returns a non-negative bid amount</span><span class="sh">'''</span>
        <span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span> <span class="o">=</span> <span class="n">user_id</span>
        <span class="k">if</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">uniform</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">self</span><span class="p">.</span><span class="n">epsilon</span><span class="p">:</span>
            <span class="n">bids</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">uniform</span><span class="p">(),</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">user_prob</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">==</span> <span class="nf">max</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">user_prob</span><span class="p">):</span>
                <span class="n">bids</span> <span class="o">=</span> <span class="mf">0.99</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bids</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.99</span><span class="p">),</span><span class="mi">3</span><span class="p">)</span>
                
        <span class="n">self</span><span class="p">.</span><span class="n">bids_over_time</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">bids</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bids</span>

    <span class="k">def</span> <span class="nf">notify</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">auction_winner</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">clicked</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Updates bidder attributes based on results from an auction round</span><span class="sh">'''</span>
        <span class="k">if</span> <span class="n">auction_winner</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">user_won_auction</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            
            <span class="k">if</span> <span class="n">clicked</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">price</span>
                <span class="n">self</span><span class="p">.</span><span class="n">user_clicked</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">price</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">-=</span> <span class="n">price</span>
                <span class="n">self</span><span class="p">.</span><span class="n">user_clicked</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">-=</span> <span class="n">price</span>
                
            <span class="n">self</span><span class="p">.</span><span class="n">user_prob</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">user_clicked</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span><span class="o">/</span><span class="n">self</span><span class="p">.</span><span class="n">user_won_auction</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span>
        
        <span class="n">self</span><span class="p">.</span><span class="n">balances_over_time</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">balance</span><span class="p">)</span>
</code></pre></div></div> <p>Finally, we attempt to incorporate the Upper Confidence Bound (UCB) method into our <code class="language-plaintext highlighter-rouge">Bidder</code> class. The mechanics for how UCB works is shown <a href="https://www.geeksforgeeks.org/upper-confidence-bound-algorithm-in-reinforcement-learning/" rel="external nofollow noopener" target="_blank">here</a>; however, the formula we implement is shown below, where A<sub>t</sub> is the action that the <code class="language-plaintext highlighter-rouge">Bidder</code> wants to take, Q<sub>t</sub>(a) is a conditional expectation, or the expected reward from taking an action a. We will estimate it by determining how much money the <code class="language-plaintext highlighter-rouge">Bidder</code> has been rewarded based on the number of times that it has bid a high amount. The last term, labelled as <code class="language-plaintext highlighter-rouge">explore</code> in the picture below, adds a certain amount of uncertainty to the equation. It is based on the number of rounds and the number of times that we have seen this <code class="language-plaintext highlighter-rouge">User</code>. If there have been very few rounds, then the explore term will be higher and the <code class="language-plaintext highlighter-rouge">Bidder</code> will be more likely to bid a high amount. On the other hand, if the <code class="language-plaintext highlighter-rouge">Auction</code> has been going on for awhile, theoretically, the <code class="language-plaintext highlighter-rouge">explore</code> term will decrease and the <code class="language-plaintext highlighter-rouge">Bidder</code> will take action based on it’s prior knowledge.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/ucb-480.webp 480w,/assets/img/ucb-800.webp 800w,/assets/img/ucb-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/ucb.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="graph layout" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Formula for Upper Confidence Bound Method (UCB) </div> <p>Knowing this formula, we implement it into our <code class="language-plaintext highlighter-rouge">UCBBidder</code> class with the code below. Not only do we keep track of our user’s proabilities through the <code class="language-plaintext highlighter-rouge">user_prob</code> list; however, we also keep track of the number of rounds (<code class="language-plaintext highlighter-rouge">self.round_counter</code>) and the number of times that the <code class="language-plaintext highlighter-rouge">Bidder</code> has won an auction with this specific user (in <code class="language-plaintext highlighter-rouge">self.user_won_auction</code>). The general procedure for the <code class="language-plaintext highlighter-rouge">.bid()</code> function will be as follows:</p> <ol> <li>The <code class="language-plaintext highlighter-rouge">Bidder</code> will see if we have won with that specific <code class="language-plaintext highlighter-rouge">User</code> at least 10 times. If it has been less than 10 times, we automatically want to explore with that user by bidding the highest bid of $1 to gain more information about the <code class="language-plaintext highlighter-rouge">User's</code> probability of clicking.</li> <li>If we have won with that <code class="language-plaintext highlighter-rouge">User</code> more than 10 times, we will check to see if that user has the highest <code class="language-plaintext highlighter-rouge">ucb</code> score in the list of <code class="language-plaintext highlighter-rouge">self.user_ucb</code>. If it does, then the <code class="language-plaintext highlighter-rouge">Bidder</code> will bid the maximum amount that will still gain the <code class="language-plaintext highlighter-rouge">Bidder</code> money (0.99 dollars)</li> <li>If the <code class="language-plaintext highlighter-rouge">User</code> does not have the highest <code class="language-plaintext highlighter-rouge">ucb</code> score, then the <code class="language-plaintext highlighter-rouge">Bidder</code> will bet a random amount to still learn more about the bidder.</li> </ol> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UCBBidder</span><span class="p">:</span>
    <span class="sh">'''</span><span class="s">Class to represent a UCB bidder in an online second-price ad auction</span><span class="sh">'''</span>    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">num_users</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_rounds</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Setting initial balance to 0, number of users, number of rounds, and round counter</span><span class="sh">'''</span>
        <span class="n">self</span><span class="p">.</span><span class="n">winning_prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_rounds</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">user_profit</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_users</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">user_won_auction</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_users</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">user_ucb</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_users</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">user_prob</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_users</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balances_over_time</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span> <span class="o">=</span> <span class="sh">''</span>
        <span class="n">self</span><span class="p">.</span><span class="n">round_counter</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">bid</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Returns a non-negative bid amount. The bid amount will be based on a variation of the
        Upper Confidence Bound (UCB) Method</span><span class="sh">'''</span>
        <span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span> <span class="o">=</span> <span class="n">user_id</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">user_won_auction</span><span class="p">[</span><span class="n">user_id</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">:</span>
            <span class="n">bids</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">self</span><span class="p">.</span><span class="n">user_won_auction</span><span class="p">[</span><span class="n">user_id</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">user_ucb</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="nf">max</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">user_ucb</span><span class="p">))</span> <span class="o">==</span> <span class="n">user_id</span><span class="p">:</span>
                <span class="n">bids</span> <span class="o">=</span> <span class="mf">0.99</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bids</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">self</span><span class="p">.</span><span class="n">user_prob</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]),</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bids</span>
    <span class="k">def</span> <span class="nf">notify</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">auction_winner</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">clicked</span><span class="p">):</span>
        <span class="sh">'''</span><span class="s">Updates bidder attributes based on results from an auction round</span><span class="sh">'''</span>
        <span class="n">self</span><span class="p">.</span><span class="n">winning_prices</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>
        <span class="c1">#Will keep a track of the bidder's balance whether they won or not.
</span>        <span class="k">if</span> <span class="n">auction_winner</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">user_won_auction</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">clicked</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">price</span>
                <span class="n">self</span><span class="p">.</span><span class="n">user_profit</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">price</span>
                <span class="n">self</span><span class="p">.</span><span class="n">round_counter</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">-=</span> <span class="n">price</span>
                <span class="n">self</span><span class="p">.</span><span class="n">user_profit</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">-=</span> <span class="n">price</span>
                <span class="n">self</span><span class="p">.</span><span class="n">round_counter</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="c1">#Find new probability of the user by dividing profit over number of times seen with user
</span>            <span class="n">self</span><span class="p">.</span><span class="n">user_prob</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">user_profit</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span><span class="o">/</span><span class="n">self</span><span class="p">.</span><span class="n">user_won_auction</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span>
            <span class="c1">#Use UCB1 Formula to calculate the new user's likelihood of betting more
</span>            <span class="n">self</span><span class="p">.</span><span class="n">user_ucb</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">user_prob</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">]</span> <span class="o">+</span> <span class="n">math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">round_counter</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">user_won_auction</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">current_user_id</span><span class="p">])))</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balances_over_time</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">balance</span><span class="p">)</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">notify()</code> function now works slightly differently where we now keep track of the profit that the <code class="language-plaintext highlighter-rouge">Bidder</code> gains from the Auction, if the user clicked or not in order to calculate the Q<sub>t</sub>(a) function. The profit is just 1 - the winning price fromt the auction. The profit is then divided by the number of times the bidder has won with that user (whether the <code class="language-plaintext highlighter-rouge">User</code> clicked or not). This will then be used to update the <code class="language-plaintext highlighter-rouge">self.user_ucb</code> for the <code class="language-plaintext highlighter-rouge">user_id</code> that they are bidding on.</p> <p>Now we have our <code class="language-plaintext highlighter-rouge">Auction</code>, our <code class="language-plaintext highlighter-rouge">Bidders</code>, and our <code class="language-plaintext highlighter-rouge">User</code> so we can simulate an auction with different numbers of <code class="language-plaintext highlighter-rouge">Users</code> and different <code class="language-plaintext highlighter-rouge">Bidders</code>. I created multiple <code class="language-plaintext highlighter-rouge">EpsilonGreedyBidders</code> in order to see the effect of changing <code class="language-plaintext highlighter-rouge">epsilon</code> in 0.1 increments. The results of the Auction are shown below for an Auction that lasted 10,000 rounds and with 5 <code class="language-plaintext highlighter-rouge">Users</code>. Overall, we can see that the <code class="language-plaintext highlighter-rouge">UCBBidder</code> does far better than any of the other <code class="language-plaintext highlighter-rouge">Bidders</code> after around 2000 rounds.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/auction_sim_05-480.webp 480w,/assets/img/auction_sim_05-800.webp 800w,/assets/img/auction_sim_05-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/auction_sim_05.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="graph layout" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> A simulation of 10000 rounds of an Auction with n = 5 users </div> <p>If we instead increase the number of <code class="language-plaintext highlighter-rouge">Users</code> to 100, then we see where the UCB method drops off significantly. The reason for this is how we implemented the bidding function, where we attempt to explore as much as possible and want to try and win with each <code class="language-plaintext highlighter-rouge">User</code> at least 10 times before considering their <code class="language-plaintext highlighter-rouge">ucb</code> score.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/auction_sim_100-480.webp 480w,/assets/img/auction_sim_100-800.webp 800w,/assets/img/auction_sim_100-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/auction_sim_100.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="graph layout" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> A simulation of 10000 rounds of an Auction with n = 100 users </div> <p>Ultimately, there are a lot more modifications that can be made with each of these models (especially with trying to output a positive balance); however, this was a great introduction into the Multi-Armed Bandit Problem and the online Advertising space. This project revealed how Object Oriented Programming can be utilized to simulate events and how to create different variations of the same classes from it.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Kenneth E. Hahn. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-projects",title:"projects",description:"A collection of projects that I have worked on personally or through school.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"A list of repositories found throughout this portfolio",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-resume",title:"resume",description:"Here you can find my resume with all educational degrees, work experiences, and relevant skills. A pdf version can be downloaded on the icon at the top right!",section:"Navigation",handler:()=>{window.location.href="/resume/"}},{id:"nav-hobbies",title:"hobbies",description:"my favorite things to do",section:"Navigation",handler:()=>{window.location.href="/hobbies/"}},{id:"post-google-gemini-updates-flash-1-5-gemma-2-and-project-astra",title:'Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra <svg width="1.2rem" height="1.2rem" top=".5rem" viewbox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>',description:"We\u2019re sharing updates across our Gemini family of models and a glimpse of Project Astra, our vision for the future of AI assistants.",section:"Posts",handler:()=>{window.open("https://blog.google/technology/ai/google-gemini-update-flash-ai-assistant-io-2024/","_blank")}},{id:"post-a-post-with-tabs",title:"a post with tabs",description:"this is what included tabs in a post could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/tabs/"}},{id:"post-a-post-with-typograms",title:"a post with typograms",description:"this is what included typograms code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/typograms/"}},{id:"post-a-post-that-can-be-cited",title:"a post that can be cited",description:"this is what a post that can be cited looks like",section:"Posts",handler:()=>{window.location.href="/blog/2024/post-citation/"}},{id:"post-a-post-with-pseudo-code",title:"a post with pseudo code",description:"this is what included pseudo code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/pseudocode/"}},{id:"post-a-post-with-code-diff",title:"a post with code diff",description:"this is how you can display code diffs",section:"Posts",handler:()=>{window.location.href="/blog/2024/code-diff/"}},{id:"post-a-post-with-advanced-image-components",title:"a post with advanced image components",description:"this is what advanced image components could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/advanced-images/"}},{id:"post-a-post-with-vega-lite",title:"a post with vega lite",description:"this is what included vega lite code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/vega-lite/"}},{id:"post-a-post-with-geojson",title:"a post with geojson",description:"this is what included geojson code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/geojson-map/"}},{id:"post-a-post-with-echarts",title:"a post with echarts",description:"this is what included echarts code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/echarts/"}},{id:"post-a-post-with-chart-js",title:"a post with chart.js",description:"this is what included chart.js code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/chartjs/"}},{id:"post-a-post-with-tikzjax",title:"a post with TikZJax",description:"this is what included TikZ code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2023/tikzjax/"}},{id:"post-a-post-with-bibliography",title:"a post with bibliography",description:"an example of a blog post with bibliography",section:"Posts",handler:()=>{window.location.href="/blog/2023/post-bibliography/"}},{id:"post-a-post-with-jupyter-notebook",title:"a post with jupyter notebook",description:"an example of a blog post with jupyter notebook",section:"Posts",handler:()=>{window.location.href="/blog/2023/jupyter-notebook/"}},{id:"post-a-post-with-custom-blockquotes",title:"a post with custom blockquotes",description:"an example of a blog post with custom blockquotes",section:"Posts",handler:()=>{window.location.href="/blog/2023/custom-blockquotes/"}},{id:"post-a-post-with-table-of-contents-on-a-sidebar",title:"a post with table of contents on a sidebar",description:"an example of a blog post with table of contents on a sidebar",section:"Posts",handler:()=>{window.location.href="/blog/2023/sidebar-table-of-contents/"}},{id:"post-a-post-with-audios",title:"a post with audios",description:"this is what included audios could look like",section:"Posts",handler:()=>{window.location.href="/blog/2023/audios/"}},{id:"post-a-post-with-videos",title:"a post with videos",description:"this is what included videos could look like",section:"Posts",handler:()=>{window.location.href="/blog/2023/videos/"}},{id:"post-displaying-beautiful-tables-with-bootstrap-tables",title:"displaying beautiful tables with Bootstrap Tables",description:"an example of how to use Bootstrap Tables",section:"Posts",handler:()=>{window.location.href="/blog/2023/tables/"}},{id:"post-a-post-with-table-of-contents",title:"a post with table of contents",description:"an example of a blog post with table of contents",section:"Posts",handler:()=>{window.location.href="/blog/2023/table-of-contents/"}},{id:"post-a-post-with-giscus-comments",title:"a post with giscus comments",description:"an example of a blog post with giscus comments",section:"Posts",handler:()=>{window.location.href="/blog/2022/giscus-comments/"}},{id:"post-displaying-external-posts-on-your-al-folio-blog",title:'Displaying External Posts on Your al-folio Blog <svg width="1.2rem" height="1.2rem" top=".5rem" viewbox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>',description:"",section:"Posts",handler:()=>{window.open("https://medium.com/@al-folio/displaying-external-posts-on-your-al-folio-blog-b60a1d241a0a?source=rss-17feae71c3c4------2","_blank")}},{id:"post-a-post-with-redirect",title:"a post with redirect",description:"you can also redirect to assets like pdf",section:"Posts",handler:()=>{window.location.href="/assets/pdf/example_pdf.pdf"}},{id:"post-a-post-with-diagrams",title:"a post with diagrams",description:"an example of a blog post with diagrams",section:"Posts",handler:()=>{window.location.href="/blog/2021/diagrams/"}},{id:"post-a-distill-style-blog-post",title:"a distill-style blog post",description:"an example of a distill-style blog post and main elements",section:"Posts",handler:()=>{window.location.href="/blog/2021/distill/"}},{id:"post-a-post-with-twitter",title:"a post with twitter",description:"an example of a blog post with twitter",section:"Posts",handler:()=>{window.location.href="/blog/2020/twitter/"}},{id:"post-a-post-with-disqus-comments",title:"a post with disqus comments",description:"an example of a blog post with disqus comments",section:"Posts",handler:()=>{window.location.href="/blog/2015/disqus-comments/"}},{id:"post-a-post-with-math",title:"a post with math",description:"an example of a blog post with some math",section:"Posts",handler:()=>{window.location.href="/blog/2015/math/"}},{id:"post-a-post-with-code",title:"a post with code",description:"an example of a blog post with some code",section:"Posts",handler:()=>{window.location.href="/blog/2015/code/"}},{id:"post-a-post-with-images",title:"a post with images",description:"this is what included images could look like",section:"Posts",handler:()=>{window.location.href="/blog/2015/images/"}},{id:"post-a-post-with-formatting-and-links",title:"a post with formatting and links",description:"march & april, looking forward to summer",section:"Posts",handler:()=>{window.location.href="/blog/2015/formatting-and-links/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"projects-sustainable-food-delivery-service",title:"Sustainable Food Delivery Service",description:"Neo4j graph databases",section:"Projects",handler:()=>{window.location.href="/projects/1_project/"}},{id:"projects-blood-pressure-risk-factors",title:"Blood Pressure Risk Factors",description:"Linear Regression with R",section:"Projects",handler:()=>{window.location.href="/projects/2_project/"}},{id:"projects-voting-difficulty-and-political-party",title:"Voting Difficulty and Political Party",description:"Hypothesis Testing with R",section:"Projects",handler:()=>{window.location.href="/projects/3_project/"}},{id:"projects-remote-work-and-travelling",title:"Remote Work and Travelling",description:"Data Analytics with Python",section:"Projects",handler:()=>{window.location.href="/projects/4_project/"}},{id:"projects-second-price-auction-simulator",title:"Second Price Auction Simulator",description:"Object Oriented Programming with Python",section:"Projects",handler:()=>{window.location.href="/projects/5_project/"}},{id:"projects-project-6",title:"project 6",description:"a project with no image",section:"Projects",handler:()=>{window.location.href="/projects/6_project/"}},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%68%61%68%6E%6B%65%6E%6E%65%74%68@%62%65%72%6B%65%6C%65%79.%65%64%75","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/hahnkenneth","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/kenneth-hahn-ab981a149","_blank")}},{id:"socials-kaggle",title:"Kaggle",section:"Socials",handler:()=>{window.open("https://www.kaggle.com/kennethehahn","_blank")}},{id:"socials-instagram",title:"Instagram",section:"Socials",handler:()=>{window.open("https://instagram.com/hahnkenneth","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>